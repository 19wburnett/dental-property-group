"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analyze-lease";
exports.ids = ["pages/api/analyze-lease"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "pdf-parse":
/*!****************************!*\
  !*** external "pdf-parse" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("pdf-parse");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-lease&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze-lease.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-lease&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze-lease.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analyze_lease_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\analyze-lease.js */ \"(api)/./pages/api/analyze-lease.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_analyze_lease_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_analyze_lease_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_lease_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_lease_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analyze-lease\",\n        pathname: \"/api/analyze-lease\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_analyze_lease_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFuYWx5emUtbGVhc2UmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2FuYWx5emUtbGVhc2UuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMkQ7QUFDM0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZW50YWwtcHJvcGVydHktZ3JvdXAvPzUyNTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhbmFseXplLWxlYXNlLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl6ZS1sZWFzZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5emUtbGVhc2VcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-lease&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze-lease.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/analyze-lease.js":
/*!************************************!*\
  !*** ./pages/api/analyze-lease.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pdf_parse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pdf-parse */ \"pdf-parse\");\n/* harmony import */ var pdf_parse__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pdf_parse__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_0__, openai__WEBPACK_IMPORTED_MODULE_3__]);\n([formidable__WEBPACK_IMPORTED_MODULE_0__, openai__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n// Initialize OpenAI client with debug logging\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_3__.OpenAI({\n    apiKey: \"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\"\n});\n// Verify OpenAI API key on startup\nif (false) {}\nasync function extractTextFromPDF(filePath) {\n    try {\n        // Read the file as a buffer\n        const dataBuffer = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readFile(filePath);\n        const data = await pdf_parse__WEBPACK_IMPORTED_MODULE_2___default()(dataBuffer);\n        return data.text;\n    } catch (error) {\n        console.error(\"PDF extraction error:\", error);\n        throw new Error(`Failed to extract text from PDF: ${error.message}`);\n    }\n}\nasync function analyzePDFWithGPT(text) {\n    try {\n        if (!text) {\n            throw new Error(\"No text provided for analysis\");\n        }\n        console.log(\"Text length for GPT analysis:\", text.length);\n        const prompt = `You are a JSON generator that analyzes lease documents. Extract the following information and respond ONLY with a JSON object containing these fields:\r\n- rentAmount (number): the monthly rent amount\r\n- leaseType (string): either \"Triple Net\", \"Modified Gross\", or \"Gross\"\r\n\r\nRespond with ONLY the JSON object, no other text.\r\n\r\nLease text to analyze:\r\n${text.substring(0, 8000)}`;\n        console.log(\"Sending request to OpenAI...\");\n        const response = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0\n        });\n        const content = response.choices[0].message.content.trim();\n        console.log(\"Raw GPT response:\", content);\n        // Parse the response, ensuring it's valid JSON\n        const analysis = JSON.parse(content);\n        // Validate the required fields\n        if (typeof analysis.rentAmount !== \"number\" || typeof analysis.leaseType !== \"string\") {\n            throw new Error(\"Invalid response format from GPT\");\n        }\n        console.log(\"Parsed analysis:\", analysis);\n        return analysis;\n    } catch (error) {\n        console.error(\"GPT analysis error details:\", {\n            error: error.message,\n            stack: error.stack,\n            name: error.name\n        });\n        throw new Error(`Failed to analyze lease with GPT: ${error.message}`);\n    }\n}\nasync function handler(req, res) {\n    console.log(\"API route called\");\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const form = (0,formidable__WEBPACK_IMPORTED_MODULE_0__.formidable)({\n            keepExtensions: true,\n            maxFileSize: 10 * 1024 * 1024,\n            multiples: true\n        });\n        const [fields, files] = await new Promise((resolve, reject)=>{\n            form.parse(req, (err, fields, files)=>{\n                if (err) {\n                    console.error(\"Form parsing error:\", err);\n                    reject(err);\n                    return;\n                }\n                resolve([\n                    fields,\n                    files\n                ]);\n            });\n        });\n        const fileField = files.file;\n        const uploadedFile = Array.isArray(fileField) ? fileField[0] : fileField;\n        if (!uploadedFile) {\n            return res.status(400).json({\n                error: \"No file uploaded\"\n            });\n        }\n        console.log(\"Processing file:\", uploadedFile.originalFilename);\n        // Extract text from PDF with debug logging\n        console.log(\"Starting PDF text extraction...\");\n        const text = await extractTextFromPDF(uploadedFile.filepath);\n        console.log(\"PDF text extracted, length:\", text?.length || 0);\n        if (!text || text.length === 0) {\n            throw new Error(\"No text content extracted from PDF\");\n        }\n        // Analyze with GPT\n        console.log(\"Starting GPT analysis...\");\n        const analysis = await analyzePDFWithGPT(text);\n        console.log(\"GPT analysis completed:\", analysis);\n        // Combine with additional data\n        const result = {\n            ...analysis,\n            termLength: \"10 years\",\n            tenant: \"Sample Dental Practice\",\n            startDate: \"2023-01-01\",\n            endDate: \"2033-01-01\"\n        };\n        // Clean up the uploaded file\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.unlink(uploadedFile.filepath);\n        } catch (error) {\n            console.error(\"Cleanup error:\", error);\n        // Continue execution even if cleanup fails\n        }\n        return res.status(200).json(result);\n    } catch (error) {\n        console.error(\"API Error details:\", {\n            message: error.message,\n            stack: error.stack,\n            name: error.name\n        });\n        return res.status(500).json({\n            error: error.message,\n            details:  true ? {\n                stack: error.stack,\n                name: error.name\n            } : 0\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0I7SUFFOUIsRUFBRSxPQUFPdkQsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsc0JBQXNCO1lBQ2xDUSxTQUFTUixNQUFNUSxPQUFPO1lBQ3RCc0IsT0FBTzlCLE1BQU04QixLQUFLO1lBQ2xCQyxNQUFNL0IsTUFBTStCLElBQUk7UUFDbEI7UUFFQSxPQUFPRyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCckMsT0FBT0EsTUFBTVEsT0FBTztZQUNwQnFELFNBQVNqRSxLQUF5QixHQUFnQjtnQkFDaERrQyxPQUFPOUIsTUFBTThCLEtBQUs7Z0JBQ2xCQyxNQUFNL0IsTUFBTStCLElBQUk7WUFDbEIsSUFBSStCLENBQVNBO1FBQ2Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVudGFsLXByb3BlcnR5LWdyb3VwLy4vcGFnZXMvYXBpL2FuYWx5emUtbGVhc2UuanM/NjkwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmb3JtaWRhYmxlIH0gZnJvbSAnZm9ybWlkYWJsZSc7XHJcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnO1xyXG5pbXBvcnQgcGRmIGZyb20gJ3BkZi1wYXJzZSc7XHJcbmltcG9ydCB7IE9wZW5BSSB9IGZyb20gJ29wZW5haSc7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGFwaToge1xyXG4gICAgYm9keVBhcnNlcjogZmFsc2UsXHJcbiAgfSxcclxufTtcclxuXHJcbi8vIEluaXRpYWxpemUgT3BlbkFJIGNsaWVudCB3aXRoIGRlYnVnIGxvZ2dpbmdcclxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XHJcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcclxufSk7XHJcblxyXG4vLyBWZXJpZnkgT3BlbkFJIEFQSSBrZXkgb24gc3RhcnR1cFxyXG5pZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XHJcbiAgY29uc29sZS5lcnJvcignT3BlbkFJIEFQSSBrZXkgaXMgbm90IHNldCcpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBleHRyYWN0VGV4dEZyb21QREYoZmlsZVBhdGgpIHtcclxuICB0cnkge1xyXG4gICAgLy8gUmVhZCB0aGUgZmlsZSBhcyBhIGJ1ZmZlclxyXG4gICAgY29uc3QgZGF0YUJ1ZmZlciA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoKTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwZGYoZGF0YUJ1ZmZlcik7XHJcbiAgICByZXR1cm4gZGF0YS50ZXh0O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdQREYgZXh0cmFjdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBleHRyYWN0IHRleHQgZnJvbSBQREY6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGFuYWx5emVQREZXaXRoR1BUKHRleHQpIHtcclxuICB0cnkge1xyXG4gICAgaWYgKCF0ZXh0KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdGV4dCBwcm92aWRlZCBmb3IgYW5hbHlzaXMnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnVGV4dCBsZW5ndGggZm9yIEdQVCBhbmFseXNpczonLCB0ZXh0Lmxlbmd0aCk7XHJcblxyXG4gICAgY29uc3QgcHJvbXB0ID0gYFlvdSBhcmUgYSBKU09OIGdlbmVyYXRvciB0aGF0IGFuYWx5emVzIGxlYXNlIGRvY3VtZW50cy4gRXh0cmFjdCB0aGUgZm9sbG93aW5nIGluZm9ybWF0aW9uIGFuZCByZXNwb25kIE9OTFkgd2l0aCBhIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdGhlc2UgZmllbGRzOlxyXG4tIHJlbnRBbW91bnQgKG51bWJlcik6IHRoZSBtb250aGx5IHJlbnQgYW1vdW50XHJcbi0gbGVhc2VUeXBlIChzdHJpbmcpOiBlaXRoZXIgXCJUcmlwbGUgTmV0XCIsIFwiTW9kaWZpZWQgR3Jvc3NcIiwgb3IgXCJHcm9zc1wiXHJcblxyXG5SZXNwb25kIHdpdGggT05MWSB0aGUgSlNPTiBvYmplY3QsIG5vIG90aGVyIHRleHQuXHJcblxyXG5MZWFzZSB0ZXh0IHRvIGFuYWx5emU6XHJcbiR7dGV4dC5zdWJzdHJpbmcoMCwgODAwMCl9YDtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnU2VuZGluZyByZXF1ZXN0IHRvIE9wZW5BSS4uLicpO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XHJcbiAgICAgIG1vZGVsOiBcImdwdC00XCIsXHJcbiAgICAgIG1lc3NhZ2VzOiBbeyBcclxuICAgICAgICByb2xlOiBcInVzZXJcIiwgXHJcbiAgICAgICAgY29udGVudDogcHJvbXB0IFxyXG4gICAgICB9XSxcclxuICAgICAgdGVtcGVyYXR1cmU6IDBcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGNvbnRlbnQgPSByZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudC50cmltKCk7XHJcbiAgICBjb25zb2xlLmxvZygnUmF3IEdQVCByZXNwb25zZTonLCBjb250ZW50KTtcclxuXHJcbiAgICAvLyBQYXJzZSB0aGUgcmVzcG9uc2UsIGVuc3VyaW5nIGl0J3MgdmFsaWQgSlNPTlxyXG4gICAgY29uc3QgYW5hbHlzaXMgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0ZSB0aGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgICBpZiAodHlwZW9mIGFuYWx5c2lzLnJlbnRBbW91bnQgIT09ICdudW1iZXInIHx8IHR5cGVvZiBhbmFseXNpcy5sZWFzZVR5cGUgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBHUFQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnUGFyc2VkIGFuYWx5c2lzOicsIGFuYWx5c2lzKTtcclxuICAgIHJldHVybiBhbmFseXNpcztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignR1BUIGFuYWx5c2lzIGVycm9yIGRldGFpbHM6Jywge1xyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxyXG4gICAgICBuYW1lOiBlcnJvci5uYW1lXHJcbiAgICB9KTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFuYWx5emUgbGVhc2Ugd2l0aCBHUFQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBjb25zb2xlLmxvZygnQVBJIHJvdXRlIGNhbGxlZCcpO1xyXG5cclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybSA9IGZvcm1pZGFibGUoe1xyXG4gICAgICBrZWVwRXh0ZW5zaW9uczogdHJ1ZSxcclxuICAgICAgbWF4RmlsZVNpemU6IDEwICogMTAyNCAqIDEwMjQsXHJcbiAgICAgIG11bHRpcGxlczogdHJ1ZSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IFtmaWVsZHMsIGZpbGVzXSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgZm9ybS5wYXJzZShyZXEsIChlcnIsIGZpZWxkcywgZmlsZXMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGb3JtIHBhcnNpbmcgZXJyb3I6JywgZXJyKTtcclxuICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXNvbHZlKFtmaWVsZHMsIGZpbGVzXSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZmlsZUZpZWxkID0gZmlsZXMuZmlsZTtcclxuICAgIGNvbnN0IHVwbG9hZGVkRmlsZSA9IEFycmF5LmlzQXJyYXkoZmlsZUZpZWxkKSA/IGZpbGVGaWVsZFswXSA6IGZpbGVGaWVsZDtcclxuICAgIFxyXG4gICAgaWYgKCF1cGxvYWRlZEZpbGUpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBmaWxlIHVwbG9hZGVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyBmaWxlOicsIHVwbG9hZGVkRmlsZS5vcmlnaW5hbEZpbGVuYW1lKTtcclxuXHJcbiAgICAvLyBFeHRyYWN0IHRleHQgZnJvbSBQREYgd2l0aCBkZWJ1ZyBsb2dnaW5nXHJcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgUERGIHRleHQgZXh0cmFjdGlvbi4uLicpO1xyXG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IGV4dHJhY3RUZXh0RnJvbVBERih1cGxvYWRlZEZpbGUuZmlsZXBhdGgpO1xyXG4gICAgY29uc29sZS5sb2coJ1BERiB0ZXh0IGV4dHJhY3RlZCwgbGVuZ3RoOicsIHRleHQ/Lmxlbmd0aCB8fCAwKTtcclxuXHJcbiAgICBpZiAoIXRleHQgfHwgdGV4dC5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0ZXh0IGNvbnRlbnQgZXh0cmFjdGVkIGZyb20gUERGJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQW5hbHl6ZSB3aXRoIEdQVFxyXG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIEdQVCBhbmFseXNpcy4uLicpO1xyXG4gICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBhbmFseXplUERGV2l0aEdQVCh0ZXh0KTtcclxuICAgIGNvbnNvbGUubG9nKCdHUFQgYW5hbHlzaXMgY29tcGxldGVkOicsIGFuYWx5c2lzKTtcclxuXHJcbiAgICAvLyBDb21iaW5lIHdpdGggYWRkaXRpb25hbCBkYXRhXHJcbiAgICBjb25zdCByZXN1bHQgPSB7XHJcbiAgICAgIC4uLmFuYWx5c2lzLFxyXG4gICAgICB0ZXJtTGVuZ3RoOiAnMTAgeWVhcnMnLFxyXG4gICAgICB0ZW5hbnQ6ICdTYW1wbGUgRGVudGFsIFByYWN0aWNlJyxcclxuICAgICAgc3RhcnREYXRlOiAnMjAyMy0wMS0wMScsXHJcbiAgICAgIGVuZERhdGU6ICcyMDMzLTAxLTAxJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBDbGVhbiB1cCB0aGUgdXBsb2FkZWQgZmlsZVxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZnMudW5saW5rKHVwbG9hZGVkRmlsZS5maWxlcGF0aCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdDbGVhbnVwIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgLy8gQ29udGludWUgZXhlY3V0aW9uIGV2ZW4gaWYgY2xlYW51cCBmYWlsc1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHQpO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yIGRldGFpbHM6Jywge1xyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXHJcbiAgICAgIG5hbWU6IGVycm9yLm5hbWVcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIGRldGFpbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8ge1xyXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcclxuICAgICAgICBuYW1lOiBlcnJvci5uYW1lXHJcbiAgICAgIH0gOiB1bmRlZmluZWRcclxuICAgIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJmb3JtaWRhYmxlIiwicHJvbWlzZXMiLCJmcyIsInBkZiIsIk9wZW5BSSIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJjb25zb2xlIiwiZXJyb3IiLCJleHRyYWN0VGV4dEZyb21QREYiLCJmaWxlUGF0aCIsImRhdGFCdWZmZXIiLCJyZWFkRmlsZSIsImRhdGEiLCJ0ZXh0IiwiRXJyb3IiLCJtZXNzYWdlIiwiYW5hbHl6ZVBERldpdGhHUFQiLCJsb2ciLCJsZW5ndGgiLCJwcm9tcHQiLCJzdWJzdHJpbmciLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwiY2hvaWNlcyIsInRyaW0iLCJhbmFseXNpcyIsIkpTT04iLCJwYXJzZSIsInJlbnRBbW91bnQiLCJsZWFzZVR5cGUiLCJzdGFjayIsIm5hbWUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImZvcm0iLCJrZWVwRXh0ZW5zaW9ucyIsIm1heEZpbGVTaXplIiwibXVsdGlwbGVzIiwiZmllbGRzIiwiZmlsZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVyciIsImZpbGVGaWVsZCIsImZpbGUiLCJ1cGxvYWRlZEZpbGUiLCJBcnJheSIsImlzQXJyYXkiLCJvcmlnaW5hbEZpbGVuYW1lIiwiZmlsZXBhdGgiLCJyZXN1bHQiLCJ0ZXJtTGVuZ3RoIiwidGVuYW50Iiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInVubGluayIsImRldGFpbHMiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/analyze-lease.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze-lease&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalyze-lease.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();